<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1"><title>Callback Pattern | rohilaHarsh</title>
<meta name=viewport content="width=device-width,minimum-scale=1"><meta name=description content="A different view of Functions People experienced in JS have a different view of functions compared to people new to JS coming from background of C, C++, Java.
Consider below JS function
let sum = function (a, b) { return a + b } The idea of storing a function in variable might seem weird to new JS developers, but this is a powerful feature of JS. This can be used in interesting ways."><meta name=generator content="Hugo 0.123.8"><meta name=robots content="index, follow"><link rel=stylesheet href=/ananke/css/main.min.31d2535c2a48db96e931588e83aa595e278fe06cfe84da3389bbbd1fafab1f4f.css><meta property="og:title" content="Callback Pattern"><meta property="og:description" content="A different view of Functions People experienced in JS have a different view of functions compared to people new to JS coming from background of C, C++, Java.
Consider below JS function
let sum = function (a, b) { return a + b } The idea of storing a function in variable might seem weird to new JS developers, but this is a powerful feature of JS. This can be used in interesting ways."><meta property="og:type" content="article"><meta property="og:url" content="https://www.rohilaharsh.in/posts/callback-pattern/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-03-01T09:29:13+05:30"><meta property="article:modified_time" content="2024-03-01T09:29:13+05:30"><meta itemprop=name content="Callback Pattern"><meta itemprop=description content="A different view of Functions People experienced in JS have a different view of functions compared to people new to JS coming from background of C, C++, Java.
Consider below JS function
let sum = function (a, b) { return a + b } The idea of storing a function in variable might seem weird to new JS developers, but this is a powerful feature of JS. This can be used in interesting ways."><meta itemprop=datePublished content="2024-03-01T09:29:13+05:30"><meta itemprop=dateModified content="2024-03-01T09:29:13+05:30"><meta itemprop=wordCount content="810"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="Callback Pattern"><meta name=twitter:description content="A different view of Functions People experienced in JS have a different view of functions compared to people new to JS coming from background of C, C++, Java.
Consider below JS function
let sum = function (a, b) { return a + b } The idea of storing a function in variable might seem weird to new JS developers, but this is a powerful feature of JS. This can be used in interesting ways."><script async src="https://www.googletagmanager.com/gtag/js?id=G-EFC3FRJ2GM"></script><script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-EFC3FRJ2GM",{anonymize_ip:!1})}</script><link rel=canonical href=https://www.rohilaharsh.in/posts/callback-pattern/><link rel=manifest href=/manifest.json><meta name=theme-color content="#000000"><link rel=apple-touch-icon href=/img/logo.png></head><body class="ma0 avenir bg-washed-yellow production"><header class="cover bg-top" style=background-image:url(https://www.rohilaharsh.in/img/callback_cover.jpeg)><div class=bg-black-60><nav class="pv3 ph3 ph4-ns" role=navigation><div class="flex-l justify-between items-center center"><a href=/ class="f3 fw2 hover-white no-underline white-90 dib home-nav"><img src=/img/logo.png class="w100 mw5-ns" alt=rohilaHarsh>
rohilaHarsh</a><div class="flex-l items-center"><ul class="pl0 mr3"><li class="list f5 f4-ns fw4 dib pr3"><a class="hover-white no-underline white-90" href=/projects/ title>Projects</a></li><li class="list f5 f4-ns fw4 dib pr3"><a class="hover-white no-underline white-90" href=/about/ title>About</a></li><li class="list f5 f4-ns fw4 dib pr3"><a class="hover-white no-underline white-90" href=/contact/ title>Contact</a></li><li class="list f5 f4-ns fw4 dib pr3"><a class="hover-white no-underline white-90" href=/fun/ title>Fun</a></li></ul><div class=ananke-socials><a href=https://github.com/HarshRohila target=_blank class="github ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="GitHub link" rel=noopener aria-label="follow on GitHub——Opens in a new window"><span class=icon><svg style="enable-background:new 0 0 512 512" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M256 32C132.3 32 32 134.8 32 261.7c0 101.5 64.2 187.5 153.2 217.9 11.2 2.1 15.3-5 15.3-11.1.0-5.5-.2-19.9-.3-39.1-62.3 13.9-75.5-30.8-75.5-30.8-10.2-26.5-24.9-33.6-24.9-33.6-20.3-14.3 1.5-14 1.5-14 22.5 1.6 34.3 23.7 34.3 23.7 20 35.1 52.4 25 65.2 19.1 2-14.8 7.8-25 14.2-30.7-49.7-5.8-102-25.5-102-113.5.0-25.1 8.7-45.6 23-61.6-2.3-5.8-10-29.2 2.2-60.8.0.0 18.8-6.2 61.6 23.5 17.9-5.1 37-7.6 56.1-7.7 19 .1 38.2 2.6 56.1 7.7 42.8-29.7 61.5-23.5 61.5-23.5 12.2 31.6 4.5 55 2.2 60.8 14.3 16.1 23 36.6 23 61.6.0 88.2-52.4 107.6-102.3 113.3 8 7.1 15.2 21.1 15.2 42.5.0 30.7-.3 55.5-.3 63 0 6.1 4 13.3 15.4 11C415.9 449.1 480 363.1 480 261.7 480 134.8 379.7 32 256 32z"/></svg>
</span><span class=new-window><svg height="8" style="enable-background:new 0 0 1000 1000" viewBox="0 0 1e3 1e3" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M598 128h298v298h-86V274L392 692l-60-60 418-418H598v-86zM810 810V512h86v298c0 46-40 86-86 86H214c-48 0-86-40-86-86V214c0-46 38-86 86-86h298v86H214v596h596z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg>
</span></a><a href=https://www.linkedin.com/in/rohilaharsh target=_blank class="linkedin ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="LinkedIn link" rel=noopener aria-label="follow on LinkedIn——Opens in a new window"><span class=icon><svg style="enable-background:new 0 0 65 65" viewBox="0 0 65 65" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M50.837 48.137V36.425c0-6.275-3.35-9.195-7.816-9.195-3.604.0-5.219 1.983-6.119 3.374V27.71h-6.79c.09 1.917.0 20.427.0 20.427h6.79V36.729c0-.609.044-1.219.224-1.655.49-1.22 1.607-2.483 3.482-2.483 2.458.0 3.44 1.873 3.44 4.618v10.929H50.837zM22.959 24.922c2.367.0 3.842-1.57 3.842-3.531-.044-2.003-1.475-3.528-3.797-3.528s-3.841 1.524-3.841 3.528c0 1.961 1.474 3.531 3.753 3.531H22.959zM34 64C17.432 64 4 50.568 4 34 4 17.431 17.432 4 34 4s30 13.431 30 30c0 16.568-13.432 30-30 30zM26.354 48.137V27.71h-6.789v20.427h6.789z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg>
</span><span class=new-window><svg height="8" style="enable-background:new 0 0 1000 1000" viewBox="0 0 1e3 1e3" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M598 128h298v298h-86V274L392 692l-60-60 418-418H598v-86zM810 810V512h86v298c0 46-40 86-86 86H214c-48 0-86-40-86-86V214c0-46 38-86 86-86h298v86H214v596h596z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg>
</span></a><a href=https://stackoverflow.com/users/5798816/harsh-rohila target=_blank class="stackoverflow ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="Stack Overflow link" rel=noopener aria-label="follow on Stack Overflow——Opens in a new window"><span class=icon><svg style="enable-background:new 0 0 67 67" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 0C5.373.0.0 5.373.0 12s5.373 12 12 12 12-5.373 12-12S18.627.0 12 0zm.869 5.903 3.114 4.567-.975.665-3.115-4.567.976-.665zm-2.812 2.585 4.84 2.838-.6 1.017-4.842-2.838.602-1.017zm-1.276 2.724 5.413 1.521-.291 1.077-5.428-1.458.306-1.14zm-.588 2.461 5.687.569-.103 1.12-5.691-.513.107-1.176zm-.169 2.16h5.835V17H8.024v-1.167zM16 19H6v-6h1v5h8v-5h1v6zm.195-8.602-.945-5.446 1.162-.202.947 5.446-1.164.202z"/></svg>
</span><span class=new-window><svg height="8" style="enable-background:new 0 0 1000 1000" viewBox="0 0 1e3 1e3" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M598 128h298v298h-86V274L392 692l-60-60 418-418H598v-86zM810 810V512h86v298c0 46-40 86-86 86H214c-48 0-86-40-86-86V214c0-46 38-86 86-86h298v86H214v596h596z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg></span></a></div></div></div></nav><div class="header-text tc-l pv6 ph3 ph4-ns"><h1 class="f2 f1-l fw2 white-90 mb0 lh-title">Callback Pattern</h1></div></div></header><main class=pb7 role=main><article class="flex-l flex-wrap justify-between mw8 center ph3"><header class="mt4 w-100"><aside class="instapaper_ignoref b helvetica tracked">POSTS</aside><div id=sharing class="mt3 ananke-socials"><a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://www.rohilaharsh.in/posts/callback-pattern/&amp;title=Callback%20Pattern" class="ananke-social-link linkedin no-underline" aria-label="share on LinkedIn"><span class=icon><svg style="enable-background:new 0 0 65 65" viewBox="0 0 65 65" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M50.837 48.137V36.425c0-6.275-3.35-9.195-7.816-9.195-3.604.0-5.219 1.983-6.119 3.374V27.71h-6.79c.09 1.917.0 20.427.0 20.427h6.79V36.729c0-.609.044-1.219.224-1.655.49-1.22 1.607-2.483 3.482-2.483 2.458.0 3.44 1.873 3.44 4.618v10.929H50.837zM22.959 24.922c2.367.0 3.842-1.57 3.842-3.531-.044-2.003-1.475-3.528-3.797-3.528s-3.841 1.524-3.841 3.528c0 1.961 1.474 3.531 3.753 3.531H22.959zM34 64C17.432 64 4 50.568 4 34 4 17.431 17.432 4 34 4s30 13.431 30 30c0 16.568-13.432 30-30 30zM26.354 48.137V27.71h-6.789v20.427h6.789z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg></span></a></div><h1 class="f1 athelas mt3 mb1 title">Callback Pattern</h1><p class=tracked>By <strong>Harsh Rohila</strong></p><time class="f6 mv4 dib tracked" datetime=2024-03-01T09:29:13+05:30>March 1, 2024</time>
<span class="f6 mv4 dib tracked">- 4 minutes read </span><span class="f6 mv4 dib tracked">- 810 words </span><applause-button style="width: 58px; height: 58px" multiclap=true url=https://www.rohilaharsh.in/posts/callback-pattern/></header><div class="nested-copy-line-height lh-copy avenir f4 nested-links mid-gray pr4-l w-two-thirds-l"><h2 id=a-different-view-of-functions>A different view of Functions</h2><p>People experienced in JS have a different view of functions compared to people new to JS coming from background of C, C++, Java.</p><p>Consider below JS function</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>sum</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>function</span> (<span style=color:#a6e22e>a</span>, <span style=color:#a6e22e>b</span>) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>a</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>b</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>The idea of storing a function in variable might seem weird to new JS developers, but this is a powerful feature of JS. This can be used in interesting ways.</p><p>Also, JS is not the only language having this, it is there in many languages, but might not be very straight forward. In Java, Lambda feature can do the same thing</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>import</span> java.util.function.Consumer;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Consumer<span style=color:#f92672>&lt;</span>Integer<span style=color:#f92672>&gt;</span> method <span style=color:#f92672>=</span> (n) <span style=color:#f92672>-&gt;</span> { System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(n); };
</span></span></code></pre></div><p>And in C++, function pointer can achieve the same</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-C++ data-lang=C++><span style=display:flex><span><span style=color:#66d9ef>int</span> <span style=color:#a6e22e>multiply</span>(<span style=color:#66d9ef>int</span> a, <span style=color:#66d9ef>int</span> b) { <span style=color:#66d9ef>return</span> a <span style=color:#f92672>*</span> b; }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span> (<span style=color:#f92672>*</span>func)(<span style=color:#66d9ef>int</span>, <span style=color:#66d9ef>int</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>func <span style=color:#f92672>=</span> multiply
</span></span></code></pre></div><p>This is a powerful feature. Because we can have function in variable we can pass it around. We can pass it as parameter to other functions, which can make code more readable or <a href=https://en.wikipedia.org/wiki/Don%27t_repeat_yourself target=_blank rel=noopener>DRY</a>
.</p><h2 id=callback-pattern>Callback Pattern</h2><p>A callback is a function passed as parameter to a function. Wherever this is done, I will refer that as Callback pattern.</p><p>In many cases, a function is passed as last parameter of function to process the result. Consider below example.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-JS data-lang=JS><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>sum</span>(<span style=color:#a6e22e>a</span>, <span style=color:#a6e22e>b</span>, <span style=color:#a6e22e>callback</span>) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>result</span> <span style=color:#f92672>=</span>  <span style=color:#a6e22e>a</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>b</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>callback</span>(<span style=color:#a6e22e>result</span>)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>logger</span>(<span style=color:#a6e22e>message</span>) {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>message</span>)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>sum</span>(<span style=color:#ae81ff>3</span>, <span style=color:#ae81ff>5</span>, <span style=color:#a6e22e>logger</span>); <span style=color:#75715e>// this will output 8
</span></span></span></code></pre></div><p>In above code, logger function is passed as parameter to sum function, So logger is a callback function. After sum is done, it calls the callback function with result, so callback function can process the result.</p><blockquote><p>Note: To remember this, you can say we are passing a function A to other function B to be &ldquo;called back&rdquo; when B is done. Hence, callback. The control returns back to A when B is done.</p></blockquote><p>You&rsquo;re maybe wondering why someone will do this. Well yes, this is a trivial example, but this can be useful when the sum function is an async function. Consider below snippet.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-JS data-lang=JS><span style=display:flex><span><span style=color:#a6e22e>httpGet</span>(<span style=color:#e6db74>&#34;https://some-api.com/users&#34;</span>, <span style=color:#a6e22e>logger</span>)
</span></span></code></pre></div><p>Here, lets say <code>httpGet</code> is making a HTTP GET request to given API. We don&rsquo;t know when that API will finish, so we pass a callback to it. When it will finish it can run the callback, so we can get result in our passed function.</p><p>Callback returning error is a common pattern in such cases. E.g.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-JS data-lang=JS><span style=display:flex><span><span style=color:#a6e22e>httpGet</span>(<span style=color:#e6db74>&#34;https://some-api.com/users&#34;</span>, <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>processResult</span>(<span style=color:#a6e22e>err</span>, <span style=color:#a6e22e>result</span>) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>err</span>) <span style=color:#a6e22e>logger</span>(<span style=color:#e6db74>&#34;Failed&#34;</span>)
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>else</span> <span style=color:#a6e22e>logger</span>(<span style=color:#a6e22e>result</span>)
</span></span><span style=display:flex><span>})
</span></span></code></pre></div><p>This was very common before Promise API came in JS. Now most libraries have converted this Callback type of API to Promises.</p><p>But that doesn&rsquo;t mean callbacks are not used anymore.</p><h2 id=more-callback-use-cases>More callback use cases</h2><h3 id=open-close-scenarios>Open-Close scenarios</h3><p>Consider cases in which we need to do 2 opposite operations, like file open-close, memory allocate and memory de-allocate. Code for file operations can look like below</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-JS data-lang=JS><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>fileDesc</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>file</span>.<span style=color:#a6e22e>open</span>()
</span></span><span style=display:flex><span><span style=color:#a6e22e>processFile</span>(<span style=color:#a6e22e>fileDesc</span>)
</span></span><span style=display:flex><span><span style=color:#a6e22e>file</span>.<span style=color:#a6e22e>close</span>()
</span></span></code></pre></div><p>Lets say you are doing this multiple times in your code. That means, every time you need to write open and close function calls, that is repetition of code. Also, developer may forget to close the file, or in case of memory, developer can forget to clear memory.</p><p>To avoid repetition of code we can create a function like below</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-JS data-lang=JS><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>fileProcessor</span>(<span style=color:#a6e22e>processFile</span>) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>fileDesc</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>file</span>.<span style=color:#a6e22e>open</span>()
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>processFile</span>(<span style=color:#a6e22e>fileDesc</span>)
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>file</span>.<span style=color:#a6e22e>close</span>()
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Now this can be used multiple times in your code like below.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-JS data-lang=JS><span style=display:flex><span><span style=color:#a6e22e>fileProcessor</span>(<span style=color:#66d9ef>function</span> <span style=color:#a6e22e>logContents</span>(<span style=color:#a6e22e>fileDesc</span>) {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>fileDesc</span>.<span style=color:#a6e22e>contents</span>)
</span></span><span style=display:flex><span>})
</span></span></code></pre></div><p>Above code will automatically open and close file every time we call it. We just need to pass <code>fileProcessor</code> function a parameter(function) which will process the file.</p><h3 id=single-place-error-handling>Single place Error Handling</h3><p>I was using Supabase database in one of my projects. Its Query Database API looks like below</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-JS data-lang=JS><span style=display:flex><span><span style=color:#66d9ef>const</span> { <span style=color:#a6e22e>data</span>, <span style=color:#a6e22e>error</span> } <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>supabase</span>
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>from</span>(<span style=color:#e6db74>&#39;countries&#39;</span>)
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>select</span>(<span style=color:#e6db74>&#39;name&#39;</span>)
</span></span></code></pre></div><p>I wanted to do single place error handling for each of the query database operations I will do in my app. Note that, these queries will be different for different types of data and these will be at multiple places in codebase. Can you think of a solution for doing single place error handling in this case?</p><p>One way can be, create a function(lets say <code>dbQuery</code>) which will call this query function and we can do error handling in <code>dbQuery</code> function. It can look like below</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>dbQuery</span>(<span style=color:#a6e22e>supabaseQuery</span>) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> { <span style=color:#a6e22e>data</span>, <span style=color:#a6e22e>error</span> } <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>supabaseQuery</span>()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>isErrorOfMyInterest</span>(<span style=color:#a6e22e>error</span>)) <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>MyCustomError</span>()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>data</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Now you can use this <code>dbQuery</code> function in any place of your app like below</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#a6e22e>dbQuery</span>(() =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>supabase</span>.<span style=color:#a6e22e>from</span>(<span style=color:#e6db74>&#39;countries&#39;</span>).<span style=color:#a6e22e>select</span>(<span style=color:#e6db74>&#39;name&#39;</span>)
</span></span><span style=display:flex><span>})
</span></span></code></pre></div><p>Now all supabase queries&rsquo; errors will get handled, and we have written error handling at single place only. This is using callback pattern only, as we are passing callback to <code>dbQuery</code> function.</p><p>These are the few examples of how callback patterns can be used. Hope you found this interesting.</p><ul class=pa0></ul><div class="mt6 instapaper_ignoref"><div><applause-button style="width: 58px; height: 58px" multiclap=true url=https://www.rohilaharsh.in/posts/callback-pattern/></div><div id=disqus_thread></div><script>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//a-web-dev-blog.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></div><aside class="w-30-l mt6-l"></aside></article></main><footer class="bg-black bottom-0 w-100 pa3" role=contentinfo><div class="flex justify-between"><a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href=https://www.rohilaharsh.in/>&copy; rohilaHarsh 2024</a><div><div class=ananke-socials><a href=https://github.com/HarshRohila target=_blank class="github ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="GitHub link" rel=noopener aria-label="follow on GitHub——Opens in a new window"><span class=icon><svg style="enable-background:new 0 0 512 512" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M256 32C132.3 32 32 134.8 32 261.7c0 101.5 64.2 187.5 153.2 217.9 11.2 2.1 15.3-5 15.3-11.1.0-5.5-.2-19.9-.3-39.1-62.3 13.9-75.5-30.8-75.5-30.8-10.2-26.5-24.9-33.6-24.9-33.6-20.3-14.3 1.5-14 1.5-14 22.5 1.6 34.3 23.7 34.3 23.7 20 35.1 52.4 25 65.2 19.1 2-14.8 7.8-25 14.2-30.7-49.7-5.8-102-25.5-102-113.5.0-25.1 8.7-45.6 23-61.6-2.3-5.8-10-29.2 2.2-60.8.0.0 18.8-6.2 61.6 23.5 17.9-5.1 37-7.6 56.1-7.7 19 .1 38.2 2.6 56.1 7.7 42.8-29.7 61.5-23.5 61.5-23.5 12.2 31.6 4.5 55 2.2 60.8 14.3 16.1 23 36.6 23 61.6.0 88.2-52.4 107.6-102.3 113.3 8 7.1 15.2 21.1 15.2 42.5.0 30.7-.3 55.5-.3 63 0 6.1 4 13.3 15.4 11C415.9 449.1 480 363.1 480 261.7 480 134.8 379.7 32 256 32z"/></svg>
</span><span class=new-window><svg height="8" style="enable-background:new 0 0 1000 1000" viewBox="0 0 1e3 1e3" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M598 128h298v298h-86V274L392 692l-60-60 418-418H598v-86zM810 810V512h86v298c0 46-40 86-86 86H214c-48 0-86-40-86-86V214c0-46 38-86 86-86h298v86H214v596h596z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg>
</span></a><a href=https://www.linkedin.com/in/rohilaharsh target=_blank class="linkedin ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="LinkedIn link" rel=noopener aria-label="follow on LinkedIn——Opens in a new window"><span class=icon><svg style="enable-background:new 0 0 65 65" viewBox="0 0 65 65" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M50.837 48.137V36.425c0-6.275-3.35-9.195-7.816-9.195-3.604.0-5.219 1.983-6.119 3.374V27.71h-6.79c.09 1.917.0 20.427.0 20.427h6.79V36.729c0-.609.044-1.219.224-1.655.49-1.22 1.607-2.483 3.482-2.483 2.458.0 3.44 1.873 3.44 4.618v10.929H50.837zM22.959 24.922c2.367.0 3.842-1.57 3.842-3.531-.044-2.003-1.475-3.528-3.797-3.528s-3.841 1.524-3.841 3.528c0 1.961 1.474 3.531 3.753 3.531H22.959zM34 64C17.432 64 4 50.568 4 34 4 17.431 17.432 4 34 4s30 13.431 30 30c0 16.568-13.432 30-30 30zM26.354 48.137V27.71h-6.789v20.427h6.789z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg>
</span><span class=new-window><svg height="8" style="enable-background:new 0 0 1000 1000" viewBox="0 0 1e3 1e3" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M598 128h298v298h-86V274L392 692l-60-60 418-418H598v-86zM810 810V512h86v298c0 46-40 86-86 86H214c-48 0-86-40-86-86V214c0-46 38-86 86-86h298v86H214v596h596z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg>
</span></a><a href=https://stackoverflow.com/users/5798816/harsh-rohila target=_blank class="stackoverflow ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="Stack Overflow link" rel=noopener aria-label="follow on Stack Overflow——Opens in a new window"><span class=icon><svg style="enable-background:new 0 0 67 67" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 0C5.373.0.0 5.373.0 12s5.373 12 12 12 12-5.373 12-12S18.627.0 12 0zm.869 5.903 3.114 4.567-.975.665-3.115-4.567.976-.665zm-2.812 2.585 4.84 2.838-.6 1.017-4.842-2.838.602-1.017zm-1.276 2.724 5.413 1.521-.291 1.077-5.428-1.458.306-1.14zm-.588 2.461 5.687.569-.103 1.12-5.691-.513.107-1.176zm-.169 2.16h5.835V17H8.024v-1.167zM16 19H6v-6h1v5h8v-5h1v6zm.195-8.602-.945-5.446 1.162-.202.947 5.446-1.164.202z"/></svg>
</span><span class=new-window><svg height="8" style="enable-background:new 0 0 1000 1000" viewBox="0 0 1e3 1e3" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M598 128h298v298h-86V274L392 692l-60-60 418-418H598v-86zM810 810V512h86v298c0 46-40 86-86 86H214c-48 0-86-40-86-86V214c0-46 38-86 86-86h298v86H214v596h596z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg></span></a></div></div></div></footer><link rel=stylesheet href=https://unpkg.com/applause-button/dist/applause-button.css><script src=https://unpkg.com/applause-button/dist/applause-button.js></script><script src=https://unpkg.com/axios@1.1.2/dist/axios.min.js></script></body></html>